<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Groq AI Provider with Structured Output and Batch Support • groqDeveloper</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Groq AI Provider with Structured Output and Batch Support">
<meta name="description" content="Provides a Groq AI provider for the ellmer package with full support for structured outputs, batch processing, and parallel execution. Extends ProviderOpenAICompatible to leverage Groq's OpenAI-compatible Chat Completions API with strict JSON schema validation for structured outputs.">
<meta property="og:description" content="Provides a Groq AI provider for the ellmer package with full support for structured outputs, batch processing, and parallel execution. Extends ProviderOpenAICompatible to leverage Groq's OpenAI-compatible Chat Completions API with strict JSON schema validation for structured outputs.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">groqDeveloper</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/xmarquez/groqDeveloper/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="groqdeveloper">groqDeveloper<a class="anchor" aria-label="anchor" href="#groqdeveloper"></a>
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>This package extends the <a href="https://github.com/tidyverse/ellmer" class="external-link">ellmer</a> package’s <code>ProviderOpenAICompatible</code> (Chat Completions format) while adding Groq-specific enhancements, in particular structured outputs, batch processing, and a <code><a href="reference/models_groq.html">models_groq()</a></code> function. It does not mask <code><a href="https://ellmer.tidyverse.org/reference/chat_groq.html" class="external-link">ellmer::chat_groq()</a></code>, but creates a <code>Chat</code> object using <code><a href="reference/chat_groq_developer.html">chat_groq_developer()</a></code>. You will need a paid developer account to use the batch processing features. The package is otherwise fully integrated with <code>ellmer</code> – it works with <code><a href="https://ellmer.tidyverse.org/reference/batch_chat.html" class="external-link">batch_chat()</a></code>, <code><a href="https://ellmer.tidyverse.org/reference/parallel_chat.html" class="external-link">parallel_chat()</a></code>, <code><a href="https://ellmer.tidyverse.org/reference/batch_chat.html" class="external-link">batch_chat_structured()</a></code>, etc.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of <code>groqDeveloper</code> from GitHub:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># install.packages("devtools")</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"xmarquez/groqDeveloper"</span>)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h2>
<p>You will need to <a href="https://console.groq.com/keys" class="external-link">set up your Groq API key</a> to use this package.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">Sys.setenv</span>(<span class="at">GROQ_API_KEY =</span> <span class="st">"your-api-key-here"</span>)</span></code></pre></div>
<p>You should add the key to your .Renviron file.</p>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<div class="section level3">
<h3 id="basic-chat">Basic chat<a class="anchor" aria-label="anchor" href="#basic-chat"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/xmarquez/groqDeveloper" class="external-link">groqDeveloper</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">chat</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/chat_groq_developer.html">chat_groq_developer</a></span><span class="op">(</span>model <span class="op">=</span> <span class="st">"openai/gpt-oss-20b"</span><span class="op">)</span></span>
<span><span class="va">chat</span><span class="op">$</span><span class="fu">chat</span><span class="op">(</span><span class="st">"What is the capital of France?"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="structured-output">Structured output<a class="anchor" aria-label="anchor" href="#structured-output"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Define the structure</span></span>
<span><span class="va">type_person</span> <span class="op">&lt;-</span> <span class="fu">ellmer</span><span class="fu">::</span><span class="fu"><a href="https://ellmer.tidyverse.org/reference/type_boolean.html" class="external-link">type_object</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="fu">ellmer</span><span class="fu">::</span><span class="fu"><a href="https://ellmer.tidyverse.org/reference/type_boolean.html" class="external-link">type_string</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  age <span class="op">=</span> <span class="fu">ellmer</span><span class="fu">::</span><span class="fu"><a href="https://ellmer.tidyverse.org/reference/type_boolean.html" class="external-link">type_integer</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  city <span class="op">=</span> <span class="fu">ellmer</span><span class="fu">::</span><span class="fu"><a href="https://ellmer.tidyverse.org/reference/type_boolean.html" class="external-link">type_string</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Extract structured data</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="va">chat</span><span class="op">$</span><span class="fu">chat_structured</span><span class="op">(</span></span>
<span>  <span class="st">"John is 30 years old and lives in New York City"</span>,</span>
<span>  type <span class="op">=</span> <span class="va">type_person</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Result is a list matching the schema</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="batch-processing">Batch processing<a class="anchor" aria-label="anchor" href="#batch-processing"></a>
</h3>
<p>Process multiple requests with cost savings using Groq’s batch API. The Groq batch API is typically blazingly fast; though completion is not guaranteed for at least 24 hours, most requests with up to 500 prompts finish in seconds.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prompts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"What is 2+2?"</span>,</span>
<span>  <span class="st">"What is the capital of France?"</span>,</span>
<span>  <span class="st">"Who wrote Romeo and Juliet?"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Submit batch job (returns NULL if wait = FALSE and not complete)</span></span>
<span><span class="va">results_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".json"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># This is typically very fast!</span></span>
<span><span class="va">chats</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ellmer.tidyverse.org/reference/batch_chat.html" class="external-link">batch_chat</a></span><span class="op">(</span></span>
<span>  <span class="va">chat</span>,</span>
<span>  prompts <span class="op">=</span> <span class="va">prompts</span>,</span>
<span>  path <span class="op">=</span> <span class="va">results_file</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">chats</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="batch-structured-output">Batch structured output<a class="anchor" aria-label="anchor" href="#batch-structured-output"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">type_answer</span> <span class="op">&lt;-</span> <span class="fu">ellmer</span><span class="fu">::</span><span class="fu"><a href="https://ellmer.tidyverse.org/reference/type_boolean.html" class="external-link">type_object</a></span><span class="op">(</span></span>
<span>  question <span class="op">=</span> <span class="fu">ellmer</span><span class="fu">::</span><span class="fu"><a href="https://ellmer.tidyverse.org/reference/type_boolean.html" class="external-link">type_string</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  answer <span class="op">=</span> <span class="fu">ellmer</span><span class="fu">::</span><span class="fu"><a href="https://ellmer.tidyverse.org/reference/type_boolean.html" class="external-link">type_string</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">results_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".json"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ellmer.tidyverse.org/reference/batch_chat.html" class="external-link">batch_chat_structured</a></span><span class="op">(</span></span>
<span>  <span class="va">chat</span>,</span>
<span>  prompts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"What is 2+2?"</span>, <span class="st">"What is the capital of France?"</span><span class="op">)</span>,</span>
<span>  path <span class="op">=</span> <span class="va">results_file</span>,</span>
<span>  type <span class="op">=</span> <span class="va">type_answer</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">data</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="parallel-processing">Parallel processing<a class="anchor" aria-label="anchor" href="#parallel-processing"></a>
</h3>
<p>Process multiple prompts concurrently (synchronous):</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ellmer.tidyverse.org/reference/parallel_chat.html" class="external-link">parallel_chat</a></span><span class="op">(</span></span>
<span>  <span class="va">chat</span>,</span>
<span>  prompts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"Tell me about Paris"</span>,</span>
<span>    <span class="st">"Tell me about London"</span>,</span>
<span>    <span class="st">"Tell me about Tokyo"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">results</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="supported-models">Supported models<a class="anchor" aria-label="anchor" href="#supported-models"></a>
</h2>
<p>For strict structured outputs, Groq supports <a href="https://console.groq.com/docs/structured-outputs#supported-models" class="external-link">the following models</a> as of 2 January 2025:</p>
</div>
</div>
<div class="section level1">
<h1 id="groq-structured-outputs---supported-models">Groq Structured Outputs - Supported Models<a class="anchor" aria-label="anchor" href="#groq-structured-outputs---supported-models"></a>
</h1>
<p>The following models support <code>strict: true</code>, which uses constrained decoding to guarantee schema-compliant output:</p>
<table class="table">
<colgroup>
<col width="50%">
<col width="50%">
</colgroup>
<thead><tr class="header">
<th>Model ID</th>
<th>Model</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>openai/gpt-oss-20b</td>
<td><a href="https://console.groq.com/docs/model/openai/gpt-oss-20b" class="external-link">GPT-OSS 20B</a></td>
</tr>
<tr class="even">
<td>openai/gpt-oss-120b</td>
<td><a href="https://console.groq.com/docs/model/openai/gpt-oss-120b" class="external-link">GPT-OSS 120B</a></td>
</tr>
</tbody>
</table>
<p>The following models support Structured Outputs with <code>strict: false</code> (default), which attempts schema compliance but may occasionally error:</p>
<table class="table">
<colgroup>
<col width="50%">
<col width="50%">
</colgroup>
<thead><tr class="header">
<th>Model ID</th>
<th>Model</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>openai/gpt-oss-20b</td>
<td><a href="https://console.groq.com/docs/model/openai/gpt-oss-20b" class="external-link">GPT-OSS 20B</a></td>
</tr>
<tr class="even">
<td>openai/gpt-oss-120b</td>
<td><a href="https://console.groq.com/docs/model/openai/gpt-oss-120b" class="external-link">GPT-OSS 120B</a></td>
</tr>
<tr class="odd">
<td>openai/gpt-oss-safeguard-20b</td>
<td><a href="https://console.groq.com/docs/model/openai/gpt-oss-safeguard-20b" class="external-link">Safety GPT OSS 20B</a></td>
</tr>
<tr class="even">
<td>moonshotai/kimi-k2-instruct-0905</td>
<td><a href="https://console.groq.com/docs/model/moonshotai/kimi-k2-instruct-0905" class="external-link">Kimi K2 Instruct</a></td>
</tr>
<tr class="odd">
<td>meta-llama/llama-4-maverick-17b-128e-instruct</td>
<td><a href="https://console.groq.com/docs/model/meta-llama/llama-4-maverick-17b-128e-instruct" class="external-link">Llama 4 Maverick</a></td>
</tr>
<tr class="even">
<td>meta-llama/llama-4-scout-17b-16e-instruct</td>
<td><a href="https://console.groq.com/docs/model/meta-llama/llama-4-scout-17b-16e-instruct" class="external-link">Llama 4 Scout</a></td>
</tr>
</tbody>
</table>
<p>Other models offered by Groq can use <a href="https://console.groq.com/docs/structured-outputs#json-object-mode" class="external-link">JSON object mode</a> to generate valid JSON, but without any schema compliance. You can use JSON object mode by passing the param <code>response_format</code> and setting it to <code>list("type" = "json_object")</code>, then decoding the text response yourself using [jsonlite::from_json]</p>
<p>Streaming and tool use are not currently supported with Structured Outputs on Groq.</p>
<div class="section level2">
<h2 id="batch-processing---supported-models">Batch processing - Supported Models<a class="anchor" aria-label="anchor" href="#batch-processing---supported-models"></a>
</h2>
<p>For batch processing, <a href="https://console.groq.com/docs/batch#model-availability-and-pricing" class="external-link">Groq supports the following models</a> as of 2 January 2025:</p>
<table class="table">
<colgroup>
<col width="50%">
<col width="50%">
</colgroup>
<thead><tr class="header">
<th>Model ID</th>
<th>Model</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>openai/gpt-oss-20b</td>
<td><a href="https://console.groq.com/docs/model/openai/gpt-oss-20b" class="external-link">GPT-OSS 20B</a></td>
</tr>
<tr class="even">
<td>openai/gpt-oss-120b</td>
<td><a href="https://console.groq.com/docs/model/openai/gpt-oss-120b" class="external-link">GPT-OSS 120B</a></td>
</tr>
<tr class="odd">
<td>meta-llama/llama-4-maverick-17b-128e-instruct</td>
<td><a href="https://console.groq.com/docs/model/meta-llama/llama-4-maverick-17b-128e-instruct" class="external-link">Llama 4 Maverick</a></td>
</tr>
<tr class="even">
<td>meta-llama/llama-4-scout-17b-16e-instruct</td>
<td><a href="https://console.groq.com/docs/model/meta-llama/llama-4-scout-17b-16e-instruct" class="external-link">Llama 4 Scout</a></td>
</tr>
<tr class="odd">
<td>llama-3.3-70b-versatile</td>
<td><a href="https://console.groq.com/docs/model/llama-3.3-70b-versatile" class="external-link">Llama 3.3 70B</a></td>
</tr>
<tr class="even">
<td>llama-3.1-8b-instant</td>
<td><a href="https://console.groq.com/docs/model/llama-3.1-8b-instant" class="external-link">Llama 3.1 8B Instant</a></td>
</tr>
<tr class="odd">
<td>meta-llama/llama-guard-4-12b</td>
<td><a href="https://console.groq.com/docs/model/meta-llama/llama-guard-4-12b" class="external-link">Llama Guard 4 12B</a></td>
</tr>
</tbody>
</table>
<p>Pricing is at a 50% cost discount compared to <a href="https://groq.com/pricing" class="external-link">synchronous API pricing</a>. But the batch discount does not stack with <a href="https://console.groq.com/docs/prompt-caching" class="external-link">prompt caching</a> discounts. All batch tokens are billed at the 50% batch rate regardless of cache status.</p>
<p>This package was mostly coded by Claude Code (Opus 4.5), though everything was reviewed by me (Xavier Marquez), including all live tests. I’ve used it with workloads of thousands of prompts at a time.</p>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>MIT</p>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/xmarquez/groqDeveloper/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/xmarquez/groqDeveloper/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing groqDeveloper</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Xavier Marquez <br><small class="roles"> Author, maintainer </small>   </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Xavier Marquez.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
